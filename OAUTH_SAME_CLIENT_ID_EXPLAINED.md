# ๐ ุดุฑุญ: ุงุณุชุฎุฏุงู ููุณ Client ID ูู GMB ู YouTube

## ๐ ุงููุถุน ุงูุญุงูู:

### โ **ุฃูุช ุชุณุชุฎุฏู:**
- `GOOGLE_CLIENT_ID` ููุงุซููู (ุฃู `YT_CLIENT_ID = GOOGLE_CLIENT_ID`)
- ููุณ Google OAuth App

---

## ๐ฏ ุงูุณุคุงู: ูู ูุฐุง ูุดููุฉุ

### โ **ุงูุฌูุงุจ: ูุงุ ููุณ ูุดููุฉ!**

ุญุชู ูู ุงุณุชุฎุฏูุช **ููุณ Client ID**ุ ุงููุธุงู **ูุง ุฒุงู ูุฏุนู ุงูุฑุจุท ุงููููุตู** ููุฃุณุจุงุจ ุงูุชุงููุฉ:

---

## โ ููุงุฐุง ุงููุธุงู ูุนูู ุจุดูู ุตุญูุญ:

### 1๏ธโฃ **Redirect URIs ูุฎุชููุฉ:**
```
GMB:    /api/gmb/oauth-callback
YouTube: /api/youtube/oauth-callback
```
- ูู OAuth flow ูู **redirect URI ูุฎุชูู**
- Google ูุนุงููููุง ูู **ุนูููุชูู ูููุตูุชูู**

### 2๏ธโฃ **Scopes ูุฎุชููุฉ:**
```
GMB:    business.manage + userinfo + openid
YouTube: youtube + userinfo + openid
```
- ุงููุณุชุฎุฏู **ููุงูู ุนูู scopes ูุฎุชููุฉ** ูู ูุฑุฉ
- ูู OAuth request **ูุณุชูู**

### 3๏ธโฃ **ุฌุฏุงูู ุชุฎุฒูู ูุฎุชููุฉ:**
```
GMB tokens โ gmb_accounts table
YouTube tokens โ oauth_tokens table (provider: 'youtube')
```
- Tokens **ูููุตูุฉ ุชูุงูุงู**
- ูุง ุชุชุฏุงุฎู ูุน ุจุนุถ

---

## ๐ ููู ูุนูู Google OAuth:

### ุนูุฏูุง ุชุณุชุฎุฏู **ููุณ Client ID**:

#### ุงูุณููุงุฑูู 1: ุฑุจุท GMB ุฃููุงู
```
1. ุงููุณุชุฎุฏู ูุถุบุท "Connect GMB"
2. Google ูุนุฑุถ: "App wants access to: Business.manage"
3. ุงููุณุชุฎุฏู ููุงูู
4. Redirect ุฅูู: /api/gmb/oauth-callback
5. ุงููุธุงู ูุญูุธ tokens ูู gmb_accounts
6. โ GMB ูุฑุจูุท ููุท
```

#### ุงูุณููุงุฑูู 2: ุฑุจุท YouTube ูุงุญูุงู
```
1. ุงููุณุชุฎุฏู ูุถุบุท "Connect YouTube"
2. Google ูุนุฑุถ: "App wants access to: YouTube"
3. ุงููุณุชุฎุฏู ููุงูู
4. Redirect ุฅูู: /api/youtube/oauth-callback
5. ุงููุธุงู ูุญูุธ tokens ูู oauth_tokens
6. โ YouTube ูุฑุจูุท ููุท
7. โ GMB ูุง ุฒุงู ูุฑุจูุท (tokens ูููุตูุฉ)
```

---

## โ๏ธ ููุงุญุธุฉ ูููุฉ:

### Google "Consent Screen" ูุฏ ูุนุฑุถ:
ุฅุฐุง ุงููุณุชุฎุฏู ุฑุจุท GMB ุฃููุงูุ ุซู ุฑุจุท YouTube:
- ูุฏ ูุฑู Google: "App already has access to Business.manage"
- ููู **ูุทูุจ ููุงููุฉ ุฌุฏูุฏุฉ** ุนูู scope `youtube`
- ุงููุณุชุฎุฏู **ููุฏุฑ ูุฑูุถ** ุฅุฐุง ูุง ุจุฏู YouTube
- **GMB ูุจูู ูุฑุจูุท** ุญุชู ูู ุฑูุถ YouTube

---

## ๐ฏ ุงูุฎูุงุตุฉ:

### โ **ุญุชู ูุน ููุณ Client ID:**

1. **ุงููุณุชุฎุฏู ููุฏุฑ ูุฑุจุท GMB ููุท:**
   - ููุงูู ุนูู `business.manage`
   - YouTube **ูุง ุจุชุฑุจุท** (ูุง ูู scopes ููู YouTube)

2. **ุงููุณุชุฎุฏู ููุฏุฑ ูุฑุจุท YouTube ููุท:**
   - ููุงูู ุนูู `youtube`
   - GMB **ูุง ุจุชุฑุจุท** (ูุง ูู scopes ููู GMB)

3. **ุงููุณุชุฎุฏู ููุฏุฑ ูุฑุจุท ุงูุงุซููู:**
   - ุนูููุฉ OAuth ูููุตูุฉ ููู ูุงุญุฏ
   - ูู ูุงุญุฏ ูุทูุจ **scopes ูุฎุชููุฉ**
   - Tokens **ูููุตูุฉ** ูู ุฌุฏุงูู ูุฎุชููุฉ

---

## ๐ก ุชุญุณูู ูุญุชูู (ุงุฎุชูุงุฑู):

### ูููู ุชุญุณูู UX ุจุฅุถุงูุฉ:

```typescript
// ูู OAuth URL
authUrl.searchParams.set('prompt', 'consent'); // โ ููุฌูุฏ
```

ูุฐุง **ูุฌุจุฑ Google** ูุทูุจ ููุงููุฉ ุฌุฏูุฏุฉ ูู ูุฑุฉุ ุญุชู ูู ููุณ Client ID.

**ุงูููุฏ ุงูุญุงูู ูุณุชุฎุฏู `prompt: 'consent'`** - ูุนูู ูู ุดูุก ุชูุงู! โ

---

## โ ุงููุชูุฌุฉ ุงูููุงุฆูุฉ:

### **ููุณ Client ID โ ูุดููุฉ**

- โ ูู OAuth flow **ูุณุชูู**
- โ Scopes **ูุฎุชููุฉ**
- โ Redirect URIs **ูุฎุชููุฉ**
- โ ุฌุฏุงูู ุชุฎุฒูู **ูุฎุชููุฉ**
- โ ุงููุณุชุฎุฏู **ูุฎุชุงุฑ** ูุง ูุฑูุฏ ุฑุจุทู

**ุงููุธุงู ูุนูู ุจุดูู ุตุญูุญ ุญุชู ูุน ููุณ Client ID!** โ

